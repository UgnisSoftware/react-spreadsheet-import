"use strict";(self.webpackChunkreact_spreadsheet_import=self.webpackChunkreact_spreadsheet_import||[]).push([[859],{"./src/ReactSpreadsheetImport.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G0:()=>ReactSpreadsheetImport,Rg:()=>defaultRSIProps,uH:()=>defaultTheme});var merge=__webpack_require__("./node_modules/lodash/merge.js"),merge_default=__webpack_require__.n(merge),react=__webpack_require__("./node_modules/react/index.js"),chunk_5LTIYV3A=__webpack_require__("./node_modules/@chakra-ui/toast/dist/chunk-5LTIYV3A.mjs"),chunk_BZDCPGYF=__webpack_require__("./node_modules/@chakra-ui/progress/dist/chunk-BZDCPGYF.mjs"),UploadStep=__webpack_require__("./src/steps/UploadStep/UploadStep.tsx"),SelectHeaderStep=__webpack_require__("./src/steps/SelectHeaderStep/SelectHeaderStep.tsx"),SelectSheetStep=__webpack_require__("./src/steps/SelectSheetStep/SelectSheetStep.tsx"),xlsx=__webpack_require__("./node_modules/xlsx-ugnis/xlsx.mjs");const mapWorkbook=(workbook,sheetName)=>{const worksheet=workbook.Sheets[sheetName||workbook.SheetNames[0]];return xlsx.P6.sheet_to_json(worksheet,{header:1,blankrows:!1,raw:!1})};var ValidationStep=__webpack_require__("./src/steps/ValidationStep/ValidationStep.tsx"),dataMutations=__webpack_require__("./src/steps/ValidationStep/utils/dataMutations.ts"),MatchColumnsStep=__webpack_require__("./src/steps/MatchColumnsStep/MatchColumnsStep.tsx");const exceedsMaxRecords=(workSheet,maxRecords)=>{const[top,bottom]=workSheet["!ref"]?.split(":").map((position=>parseInt(position.replace(/\D/g,""),10)))||[];return bottom-top>maxRecords};var useRsi=__webpack_require__("./src/hooks/useRsi.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");let StepType=function(StepType){return StepType.upload="upload",StepType.selectSheet="selectSheet",StepType.selectHeader="selectHeader",StepType.matchColumns="matchColumns",StepType.validateData="validateData",StepType}({});const UploadFlow=({state,onNext,onBack})=>{const{maxRecords,translations,uploadStepHook,selectHeaderStepHook,matchColumnsStepHook,fields,rowHook,tableHook}=(0,useRsi.j)(),[uploadedFile,setUploadedFile]=(0,react.useState)(null),toast=(0,chunk_5LTIYV3A.p)(),errorToast=(0,react.useCallback)((description=>{toast({status:"error",variant:"left-accent",position:"bottom-left",title:`${translations.alerts.toast.error}`,description,isClosable:!0})}),[toast,translations]);switch(state.type){case StepType.upload:return(0,jsx_runtime.jsx)(UploadStep.I,{onContinue:async(workbook,file)=>{setUploadedFile(file);if(1===workbook.SheetNames.length){if(maxRecords&&exceedsMaxRecords(workbook.Sheets[workbook.SheetNames[0]],maxRecords))return void errorToast(translations.uploadStep.maxRecordsExceeded(maxRecords.toString()));try{const mappedWorkbook=await uploadStepHook(mapWorkbook(workbook));onNext({type:StepType.selectHeader,data:mappedWorkbook})}catch(e){errorToast(e.message)}}else onNext({type:StepType.selectSheet,workbook})}});case StepType.selectSheet:return(0,jsx_runtime.jsx)(SelectSheetStep.D,{sheetNames:state.workbook.SheetNames,onContinue:async sheetName=>{if(maxRecords&&exceedsMaxRecords(state.workbook.Sheets[sheetName],maxRecords))errorToast(translations.uploadStep.maxRecordsExceeded(maxRecords.toString()));else try{const mappedWorkbook=await uploadStepHook(mapWorkbook(state.workbook,sheetName));onNext({type:StepType.selectHeader,data:mappedWorkbook})}catch(e){errorToast(e.message)}},onBack});case StepType.selectHeader:return(0,jsx_runtime.jsx)(SelectHeaderStep.B,{data:state.data,onContinue:async(...args)=>{try{const{data,headerValues}=await selectHeaderStepHook(...args);onNext({type:StepType.matchColumns,data,headerValues})}catch(e){errorToast(e.message)}},onBack});case StepType.matchColumns:return(0,jsx_runtime.jsx)(MatchColumnsStep.E,{data:state.data,headerValues:state.headerValues,onContinue:async(values,rawData,columns)=>{try{const data=await matchColumnsStepHook(values,rawData,columns),dataWithMeta=await(0,dataMutations.g)(data,fields,rowHook,tableHook);onNext({type:StepType.validateData,data:dataWithMeta})}catch(e){errorToast(e.message)}},onBack});case StepType.validateData:return(0,jsx_runtime.jsx)(ValidationStep.j,{initialData:state.data,file:uploadedFile,onBack});default:return(0,jsx_runtime.jsx)(chunk_BZDCPGYF.E,{isIndeterminate:!0})}};try{UploadFlow.displayName="UploadFlow",UploadFlow.__docgenInfo={description:"",displayName:"UploadFlow",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"StepState"}},onNext:{defaultValue:null,description:"",name:"onNext",required:!0,type:{name:"(v: StepState) => void"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/UploadFlow.tsx#UploadFlow"]={docgenInfo:UploadFlow.__docgenInfo,name:"UploadFlow",path:"src/steps/UploadFlow.tsx#UploadFlow"})}catch(__react_docgen_typescript_loader_error){}var chunk_5FG5SY5K=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-5FG5SY5K.mjs"),chakra_ui_steps_es=__webpack_require__("./node_modules/chakra-ui-steps/dist/chakra-ui-steps.es.js"),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js");const steps=["uploadStep","selectHeaderStep","matchColumnsStep","validationStep"],StepTypeToStepRecord={[StepType.upload]:"uploadStep",[StepType.selectSheet]:"uploadStep",[StepType.selectHeader]:"selectHeaderStep",[StepType.matchColumns]:"matchColumnsStep",[StepType.validateData]:"validationStep"},StepToStepTypeRecord={uploadStep:StepType.upload,selectHeaderStep:StepType.selectHeader,matchColumnsStep:StepType.matchColumns,validationStep:StepType.validateData},CheckIcon=({color})=>(0,jsx_runtime.jsx)(index_esm.Dey,{size:"36px",color});CheckIcon.displayName="CheckIcon";const Steps=()=>{const{initialStepState,translations,isNavigationEnabled}=(0,useRsi.j)(),initialStep=(type=>{const step=StepTypeToStepRecord[type||StepType.upload];return Math.max(0,steps.indexOf(step))})(initialStepState?.type),{nextStep,activeStep,setStep}=(0,chakra_ui_steps_es.h4)({initialStep}),[state,setState]=(0,react.useState)(initialStepState||{type:StepType.upload}),history=(0,react.useRef)([]),onClickStep=stepIndex=>{const type=(stepIndex=>{const step=steps[stepIndex];return StepToStepTypeRecord[step]||StepType.upload})(stepIndex),historyIdx=history.current.findIndex((v=>v.type===type));if(-1===historyIdx)return;const nextHistory=history.current.slice(0,historyIdx+1);history.current=nextHistory,setState(nextHistory[nextHistory.length-1]),setStep(stepIndex)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chunk_5FG5SY5K.x,{display:["none","none","block"],children:(0,jsx_runtime.jsx)(chakra_ui_steps_es.Rg,{activeStep,checkIcon:CheckIcon,onClickStep:isNavigationEnabled?onClickStep:void 0,responsive:!1,children:steps.map((key=>(0,jsx_runtime.jsx)(chakra_ui_steps_es.h8,{label:translations[key].title},key)))})}),(0,jsx_runtime.jsx)(UploadFlow,{state,onNext:v=>{history.current.push(state),setState(v),v.type!==StepType.selectSheet&&nextStep()},onBack:isNavigationEnabled?()=>{onClickStep(Math.max(activeStep-1,0))}:void 0})]})},themeOverrides={colors:{textColor:"#2D3748",subtitleColor:"#718096",inactiveColor:"#A0AEC0",border:"#E2E8F0",background:"white",backgroundAlpha:"rgba(255,255,255,0)",secondaryBackground:"#EDF2F7",highlight:"#E2E8F0",rsi:{50:"#E6E6FF",100:"#C4C6FF",200:"#A2A5FC",300:"#8888FC",400:"#7069FA",500:"#5D55FA",600:"#4D3DF7",700:"#3525E6",800:"#1D0EBE",900:"#0C008C"}},shadows:{outline:0},components:{UploadStep:{baseStyle:{heading:{fontSize:"3xl",color:"textColor",mb:"2rem"},title:{fontSize:"2xl",lineHeight:8,fontWeight:"semibold",color:"textColor"},subtitle:{fontSize:"md",lineHeight:6,color:"subtitleColor",mb:"1rem"},tableWrapper:{mb:"0.5rem",position:"relative",h:"72px"},dropzoneText:{size:"lg",lineHeight:7,fontWeight:"semibold",color:"textColor"},dropZoneBorder:"rsi.500",dropzoneButton:{mt:"1rem"}}},SelectSheetStep:{baseStyle:{heading:{color:"textColor",mb:8,fontSize:"3xl"},radio:{},radioLabel:{color:"textColor"}}},SelectHeaderStep:{baseStyle:{heading:{color:"textColor",mb:8,fontSize:"3xl"}}},MatchColumnsStep:{baseStyle:{heading:{color:"textColor",mb:8,fontSize:"3xl"},title:{color:"textColor",fontSize:"2xl",lineHeight:8,fontWeight:"semibold",mb:4},userTable:{header:{fontSize:"xs",lineHeight:4,fontWeight:"bold",letterSpacing:"wider",color:"textColor",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","&[data-ignored]":{color:"inactiveColor"}},cell:{fontSize:"sm",lineHeight:5,fontWeight:"medium",color:"textColor",px:6,py:4,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","&[data-ignored]":{color:"inactiveColor"}},ignoreButton:{size:"xs",colorScheme:"gray",color:"textColor"}},selectColumn:{text:{fontSize:"sm",lineHeight:5,fontWeight:"normal",color:"inactiveColor",px:4},accordionLabel:{color:"blue.600",fontSize:"sm",lineHeight:5,pl:1},selectLabel:{pt:"0.375rem",pb:2,fontSize:"md",lineHeight:6,fontWeight:"medium",color:"textColor"}},select:{control:provided=>({...provided,borderColor:"border",_hover:{borderColor:"border"},"&[data-focus-visible]":{borderColor:"border",boxShadow:"none"}}),menu:provided=>({...provided,p:0,mt:0}),menuList:provided=>({...provided,bg:"background",borderColor:"border"}),option:(provided,state)=>({...provided,color:"textColor",bg:state.isSelected||state.isFocused?"highlight":"background",overflow:"hidden",textOverflow:"ellipsis",display:"block",whiteSpace:"nowrap",_hover:{bg:"highlight"}}),placeholder:provided=>({...provided,color:"inactiveColor"}),noOptionsMessage:provided=>({...provided,color:"inactiveColor"})}}},ValidationStep:{baseStyle:{heading:{color:"textColor",fontSize:"3xl"},select:{valueContainer:provided=>({...provided,py:0,px:1.5}),inputContainer:provided=>({...provided,py:0}),control:provided=>({...provided,border:"none"}),input:provided=>({...provided,color:"textColor"}),menu:provided=>({...provided,p:0,mt:0}),menuList:provided=>({...provided,bg:"background",borderColor:"border"}),option:(provided,state)=>({...provided,color:"textColor",bg:state.isSelected||state.isFocused?"highlight":"background",overflow:"hidden",textOverflow:"ellipsis",display:"block",whiteSpace:"nowrap"}),noOptionsMessage:provided=>({...provided,color:"inactiveColor"})}}},MatchIcon:{baseStyle:props=>({display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",borderWidth:"2px",bg:"background",borderColor:"yellow.500",color:"background",transitionDuration:"ultra-fast",_highlighted:{bg:"green.500",borderColor:"green.500"}}),defaultProps:{size:"md",colorScheme:"green"}},Steps:{...chakra_ui_steps_es.zX,baseStyle:props=>{const navigationEnabled=!!props.onClickStep;return{...chakra_ui_steps_es.zX.baseStyle(props),stepContainer:{...chakra_ui_steps_es.zX.baseStyle(props).stepContainer,cursor:navigationEnabled?"pointer":"initial"},label:{...chakra_ui_steps_es.zX.baseStyle(props).label,color:"textColor"}}},variants:{circles:props=>({...chakra_ui_steps_es.zX.variants.circles(props),step:{...chakra_ui_steps_es.zX.variants.circles(props).step,"&:not(:last-child):after":{...chakra_ui_steps_es.zX.variants.circles(props).step["&:not(:last-child):after"],backgroundColor:"background"}},stepIconContainer:{...chakra_ui_steps_es.zX.variants.circles(props).stepIconContainer,flex:"0 0 auto",bg:"background",borderColor:"background"}})}},Modal:{baseStyle:{dialog:{borderRadius:"lg",bg:"background",fontSize:"lg",color:"textColor"},closeModalButton:{},backButton:{gridColumn:"1",gridRow:"1",justifySelf:"start"},continueButton:{gridColumn:"1 / 3",gridRow:"1",justifySelf:"center"}},variants:{rsi:{header:{bg:"secondaryBackground",px:"2rem",py:"1.5rem"},body:{bg:"background",display:"flex",paddingX:"2rem",paddingY:"2rem",flexDirection:"column",flex:1,overflow:"auto",height:"100%"},footer:{bg:"secondaryBackground",py:"1.5rem",px:"2rem",justifyContent:"center",display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr",gap:"1rem"},dialog:{outline:"unset",minH:"calc(var(--chakra-vh) - 4rem)",maxW:"calc(var(--chakra-vw) - 4rem)",my:"2rem",borderRadius:"3xl",overflow:"hidden"}}}},Button:{defaultProps:{colorScheme:"rsi"}}},styles:{global:{":root":{"--chakra-vh":"100vh","--chakra-vw":"100vw"},"@supports (height: 100dvh) and (width: 100dvw) ":{":root":{"--chakra-vh":"100dvh","--chakra-vw":"100dvw"}},".rdg":{contain:"size layout style paint",borderRadius:"lg",border:"none",borderTop:"1px solid var(--rdg-border-color)",blockSize:"100%",flex:"1","--rdg-row-height":"35px","--rdg-color":"var(--chakra-colors-textColor)","--rdg-background-color":"var(--chakra-colors-background)","--rdg-header-background-color":"var(--chakra-colors-background)","--rdg-row-hover-background-color":"var(--chakra-colors-background)","--rdg-selection-color":"var(--chakra-colors-blue-400)","--rdg-row-selected-background-color":"var(--chakra-colors-rsi-50)","--row-selected-hover-background-color":"var(--chakra-colors-rsi-100)","--rdg-error-cell-background-color":"var(--chakra-colors-red-50)","--rdg-warning-cell-background-color":"var(--chakra-colors-orange-50)","--rdg-info-cell-background-color":"var(--chakra-colors-blue-50)","--rdg-border-color":"var(--chakra-colors-border)","--rdg-frozen-cell-box-shadow":"none","--rdg-font-size":"var(--chakra-fontSizes-sm)"},".rdg-header-row .rdg-cell":{color:"textColor",fontSize:"xs",lineHeight:10,fontWeight:"bold",letterSpacing:"wider",textTransform:"uppercase","&:first-of-type":{borderTopLeftRadius:"lg"},"&:last-child":{borderTopRightRadius:"lg"}},".rdg-row:last-child .rdg-cell:first-of-type":{borderBottomLeftRadius:"lg"},".rdg-row:last-child .rdg-cell:last-child":{borderBottomRightRadius:"lg"},".rdg[dir='rtl']":{".rdg-row:last-child .rdg-cell:first-of-type":{borderBottomRightRadius:"lg",borderBottomLeftRadius:"none"},".rdg-row:last-child .rdg-cell:last-child":{borderBottomLeftRadius:"lg",borderBottomRightRadius:"none"}},".rdg-cell":{contain:"size layout style paint",borderRight:"none",borderInlineEnd:"none",borderBottom:"1px solid var(--rdg-border-color)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&[aria-selected='true']":{boxShadow:"inset 0 0 0 1px var(--rdg-selection-color)"},"&:first-of-type":{boxShadow:"none",borderInlineStart:"1px solid var(--rdg-border-color)"},"&:last-child":{borderInlineEnd:"1px solid var(--rdg-border-color)"}},".rdg-cell-error":{backgroundColor:"var(--rdg-error-cell-background-color)"},".rdg-cell-warning":{backgroundColor:"var(--rdg-warning-cell-background-color)"},".rdg-cell-info":{backgroundColor:"var(--rdg-info-cell-background-color)"},".rdg-static":{cursor:"pointer"},".rdg-static .rdg-header-row":{display:"none"},".rdg-static .rdg-cell":{"--rdg-selection-color":"none"},".rdg-example .rdg-cell":{"--rdg-selection-color":"none",borderBottom:"none"},".rdg-radio":{display:"flex",alignItems:"center"},".rdg-checkbox":{"--rdg-selection-color":"none",display:"flex",alignItems:"center"}}}},rtlThemeSupport={components:{Modal:{baseStyle:{dialog:{direction:"rtl"}}}}};var Providers=__webpack_require__("./src/components/Providers.tsx"),ModalWrapper=__webpack_require__("./src/components/ModalWrapper.tsx");const translations={uploadStep:{title:"Upload file",manifestTitle:"Data that we expect:",manifestDescription:"(You will have a chance to rename or remove columns in next steps)",maxRecordsExceeded:maxRecords=>`Too many records. Up to ${maxRecords} allowed`,dropzone:{title:"Upload .xlsx, .xls or .csv file",errorToastDescription:"upload rejected",activeDropzoneTitle:"Drop file here...",buttonTitle:"Select file",loadingTitle:"Processing..."},selectSheet:{title:"Select the sheet to use",nextButtonTitle:"Next",backButtonTitle:"Back"}},selectHeaderStep:{title:"Select header row",nextButtonTitle:"Next",backButtonTitle:"Back"},matchColumnsStep:{title:"Match Columns",nextButtonTitle:"Next",backButtonTitle:"Back",userTableTitle:"Your table",templateTitle:"Will become",selectPlaceholder:"Select column...",ignoredColumnText:"Column ignored",subSelectPlaceholder:"Select...",matchDropdownTitle:"Match",unmatched:"Unmatched",duplicateColumnWarningTitle:"Another column unselected",duplicateColumnWarningDescription:"Columns cannot duplicate"},validationStep:{title:"Validate data",nextButtonTitle:"Confirm",backButtonTitle:"Back",noRowsMessage:"No data found",noRowsMessageWhenFiltered:"No data containing errors",discardButtonTitle:"Discard selected rows",filterSwitchTitle:"Show only rows with errors"},alerts:{confirmClose:{headerTitle:"Exit import flow",bodyText:"Are you sure? Your current information will not be saved.",cancelButtonTitle:"Cancel",exitButtonTitle:"Exit flow"},submitIncomplete:{headerTitle:"Errors detected",bodyText:"There are still some rows that contain errors. Rows with errors will be ignored when submitting.",bodyTextSubmitForbidden:"There are still some rows containing errors.",cancelButtonTitle:"Cancel",finishButtonTitle:"Submit"},submitError:{title:"Error",defaultMessage:"An error occurred while submitting data"},unmatchedRequiredFields:{headerTitle:"Not all columns matched",bodyText:"There are required columns that are not matched or ignored. Do you want to continue?",listTitle:"Columns not matched:",cancelButtonTitle:"Cancel",continueButtonTitle:"Continue"},toast:{error:"Error"}}},defaultTheme=themeOverrides,defaultRSIProps={autoMapHeaders:!0,autoMapSelectValues:!1,allowInvalidSubmit:!0,autoMapDistance:2,isNavigationEnabled:!1,translations,uploadStepHook:async value=>value,selectHeaderStepHook:async(headerValues,data)=>({headerValues,data}),matchColumnsStepHook:async table=>table,dateFormat:"yyyy-mm-dd",parseRaw:!0},ReactSpreadsheetImport=propsWithoutDefaults=>{const props=merge_default()({},defaultRSIProps,propsWithoutDefaults),mergedTranslations=props.translations!==translations?merge_default()(translations,props.translations):translations,mergedThemes=props.rtl?merge_default()(defaultTheme,rtlThemeSupport,props.customTheme):merge_default()(defaultTheme,props.customTheme);return(0,jsx_runtime.jsx)(Providers.Cl,{theme:mergedThemes,rsiValues:{...props,translations:mergedTranslations},children:(0,jsx_runtime.jsx)(ModalWrapper.A,{isOpen:props.isOpen,onClose:props.onClose,children:(0,jsx_runtime.jsx)(Steps,{})})})};ReactSpreadsheetImport.displayName="ReactSpreadsheetImport";try{ReactSpreadsheetImport.displayName="ReactSpreadsheetImport",ReactSpreadsheetImport.__docgenInfo={description:"",displayName:"ReactSpreadsheetImport",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"readonly { readonly label: string; readonly key: DeepReadonly<T>; readonly description?: string | undefined; readonly alternateMatches?: readonly string[] | undefined; readonly validations?: readonly ({ ...; } | ... 1 more ... | { ...; })[] | undefined; readonly fieldType: { ...; } | ... 1 more ... | { ...; }; reado..."}},uploadStepHook:{defaultValue:null,description:"",name:"uploadStepHook",required:!1,type:{name:"((data: RawData[]) => Promise<RawData[]>)"}},selectHeaderStepHook:{defaultValue:null,description:"",name:"selectHeaderStepHook",required:!1,type:{name:"((headerValues: RawData, data: RawData[]) => Promise<{ headerValues: RawData; data: RawData[]; }>)"}},matchColumnsStepHook:{defaultValue:null,description:"",name:"matchColumnsStepHook",required:!1,type:{name:"((table: Data<T>[], rawData: RawData[], columns: Columns<T>) => Promise<Data<T>[]>)"}},rowHook:{defaultValue:null,description:"",name:"rowHook",required:!1,type:{name:"RowHook<T>"}},tableHook:{defaultValue:null,description:"",name:"tableHook",required:!1,type:{name:"TableHook<T>"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(data: Result<T>, file: File) => void | Promise<any>"}},allowInvalidSubmit:{defaultValue:null,description:"",name:"allowInvalidSubmit",required:!1,type:{name:"boolean"}},isNavigationEnabled:{defaultValue:null,description:"",name:"isNavigationEnabled",required:!1,type:{name:"boolean"}},translations:{defaultValue:null,description:"",name:"translations",required:!1,type:{name:"{ uploadStep?: { title?: string; manifestTitle?: string; manifestDescription?: string | undefined; maxRecordsExceeded?: ((maxRecords: string) => string) | undefined; dropzone?: { ...; } | undefined; selectSheet?: { ...; } | undefined; } | undefined; selectHeaderStep?: { ...; } | undefined; ma..."}},customTheme:{defaultValue:null,description:"",name:"customTheme",required:!1,type:{name:"object"}},maxRecords:{defaultValue:null,description:"",name:"maxRecords",required:!1,type:{name:"number"}},maxFileSize:{defaultValue:null,description:"",name:"maxFileSize",required:!1,type:{name:"number"}},autoMapHeaders:{defaultValue:null,description:"",name:"autoMapHeaders",required:!1,type:{name:"boolean"}},autoMapSelectValues:{defaultValue:null,description:"",name:"autoMapSelectValues",required:!1,type:{name:"boolean"}},autoMapDistance:{defaultValue:null,description:"",name:"autoMapDistance",required:!1,type:{name:"number"}},initialStepState:{defaultValue:null,description:"",name:"initialStepState",required:!1,type:{name:"StepState"}},dateFormat:{defaultValue:null,description:"",name:"dateFormat",required:!1,type:{name:"string"}},parseRaw:{defaultValue:null,description:"",name:"parseRaw",required:!1,type:{name:"boolean"}},rtl:{defaultValue:null,description:"",name:"rtl",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactSpreadsheetImport.tsx#ReactSpreadsheetImport"]={docgenInfo:ReactSpreadsheetImport.__docgenInfo,name:"ReactSpreadsheetImport",path:"src/ReactSpreadsheetImport.tsx#ReactSpreadsheetImport"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ContinueButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>ContinueButton});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-RAWN7VJ3.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-UVUR7MCU.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ContinueButton=({onContinue,onBack,title,backTitle,isLoading})=>{const styles=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_1__.mq)("Modal"),nextButtonMobileWidth=onBack?"8rem":"100%";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__.m,{children:[onBack&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.z,{size:"md",sx:styles.backButton,onClick:onBack,isLoading,variant:"link",children:backTitle}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.z,{size:"lg",w:{base:nextButtonMobileWidth,md:"21rem"},sx:styles.continueButton,onClick:onContinue,isLoading,children:title})]})};ContinueButton.displayName="ContinueButton";try{ContinueButton.displayName="ContinueButton",ContinueButton.__docgenInfo={description:"",displayName:"ContinueButton",props:{onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(val: any) => void"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},backTitle:{defaultValue:null,description:"",name:"backTitle",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ContinueButton.tsx#ContinueButton"]={docgenInfo:ContinueButton.__docgenInfo,name:"ContinueButton",path:"src/components/ContinueButton.tsx#ContinueButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ModalWrapper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ModalWrapper});var chunk_MSA2NPQT=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-MSA2NPQT.mjs"),chunk_JQMJHPZH=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-JQMJHPZH.mjs"),chunk_EL2VKIZQ=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-EL2VKIZQ.mjs"),chunk_DMO4EI7P=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),chunk_6QYXN73V=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-6QYXN73V.mjs"),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js"),chunk_FQDHE43W=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-FQDHE43W.mjs"),chunk_5FG5SY5K=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-5FG5SY5K.mjs"),chunk_OFOVX77R=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OFOVX77R.mjs"),chunk_RAWN7VJ3=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-RAWN7VJ3.mjs"),chunk_UVUR7MCU=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-UVUR7MCU.mjs"),react=__webpack_require__("./node_modules/react/index.js"),useRsi=__webpack_require__("./src/hooks/useRsi.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ConfirmCloseAlert=({isOpen,onClose,onConfirm})=>{const{translations}=(0,useRsi.j)(),cancelRef=(0,react.useRef)(null);return(0,jsx_runtime.jsx)(chunk_FQDHE43W.a,{isOpen,onClose,leastDestructiveRef:cancelRef,isCentered:!0,id:"rsi",children:(0,jsx_runtime.jsx)(chunk_JQMJHPZH.Z,{children:(0,jsx_runtime.jsxs)(chunk_FQDHE43W._,{children:[(0,jsx_runtime.jsx)(chunk_5FG5SY5K.x,{children:translations.alerts.confirmClose.headerTitle}),(0,jsx_runtime.jsx)(chunk_OFOVX77R.f,{children:translations.alerts.confirmClose.bodyText}),(0,jsx_runtime.jsxs)(chunk_RAWN7VJ3.m,{children:[(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{ref:cancelRef,onClick:onClose,variant:"secondary",children:translations.alerts.confirmClose.cancelButtonTitle}),(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{colorScheme:"red",onClick:onConfirm,ml:3,children:translations.alerts.confirmClose.exitButtonTitle})]})]})})})};ConfirmCloseAlert.displayName="ConfirmCloseAlert";try{ConfirmCloseAlert.displayName="ConfirmCloseAlert",ConfirmCloseAlert.__docgenInfo={description:"",displayName:"ConfirmCloseAlert",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Alerts/ConfirmCloseAlert.tsx#ConfirmCloseAlert"]={docgenInfo:ConfirmCloseAlert.__docgenInfo,name:"ConfirmCloseAlert",path:"src/components/Alerts/ConfirmCloseAlert.tsx#ConfirmCloseAlert"})}catch(__react_docgen_typescript_loader_error){}const ModalCloseButton=({onClose})=>{const[showModal,setShowModal]=(0,react.useState)(!1),styles=(0,chunk_DMO4EI7P.mq)("Modal");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ConfirmCloseAlert,{isOpen:showModal,onClose:()=>setShowModal(!1),onConfirm:()=>{setShowModal(!1),onClose()}}),(0,jsx_runtime.jsx)(chunk_6QYXN73V.h,{right:"14px",top:"20px",variant:"unstyled",sx:styles.closeModalButton,"aria-label":"Close modal",icon:(0,jsx_runtime.jsx)(index_esm.Fk5,{}),color:"white",position:"fixed",transform:"translate(50%, -50%)",onClick:()=>setShowModal(!0),zIndex:"toast",dir:"ltr"})]})};try{ModalCloseButton.displayName="ModalCloseButton",ModalCloseButton.__docgenInfo={description:"",displayName:"ModalCloseButton",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalCloseButton.tsx#ModalCloseButton"]={docgenInfo:ModalCloseButton.__docgenInfo,name:"ModalCloseButton",path:"src/components/ModalCloseButton.tsx#ModalCloseButton"})}catch(__react_docgen_typescript_loader_error){}const ModalWrapper=({children,isOpen,onClose})=>{const{rtl}=(0,useRsi.j)();return(0,jsx_runtime.jsx)(chunk_MSA2NPQT.u_,{isOpen,onClose,id:"rsi",variant:"rsi",closeOnEsc:!1,closeOnOverlayClick:!1,scrollBehavior:"inside",children:(0,jsx_runtime.jsxs)("div",{dir:rtl?"rtl":"ltr",children:[(0,jsx_runtime.jsx)(chunk_JQMJHPZH.Z,{}),(0,jsx_runtime.jsx)(ModalCloseButton,{onClose}),(0,jsx_runtime.jsx)(chunk_EL2VKIZQ.h,{children})]})})};ModalWrapper.displayName="ModalWrapper";try{ModalWrapper.displayName="ModalWrapper",ModalWrapper.__docgenInfo={description:"",displayName:"ModalWrapper",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ModalWrapper.tsx#ModalWrapper"]={docgenInfo:ModalWrapper.__docgenInfo,name:"ModalWrapper",path:"src/components/ModalWrapper.tsx#ModalWrapper"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Providers.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cl:()=>Providers,c5:()=>rootId,y8:()=>RsiContext});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@chakra-ui/theme-utils/dist/chunk-LIR5QAZY.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@chakra-ui/react/dist/chunk-QAITB7GG.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const RsiContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}),rootId="chakra-modal-rsi",Providers=({children,theme,rsiValues})=>{const mergedTheme=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__.B1)(theme);if(!rsiValues.fields)throw new Error("Fields must be provided to react-spreadsheet-import");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(RsiContext.Provider,{value:rsiValues,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.x,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.x,{cssVarsRoot:`#${rootId}`,theme:mergedTheme,children})})})};Providers.displayName="Providers";try{Providers.displayName="Providers",Providers.__docgenInfo={description:"",displayName:"Providers",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:'{ readonly colors?: { readonly textColor?: "#2D3748" | undefined; readonly subtitleColor?: "#718096" | undefined; readonly inactiveColor?: "#A0AEC0" | undefined; readonly border?: "#E2E8F0" | undefined; ... 4 more ...; readonly rsi?: { ...; } | undefined; } | undefined; readonly shadows?: { ...; } | undefined; reado...'}},rsiValues:{defaultValue:null,description:"",name:"rsiValues",required:!0,type:{name:"RsiProps<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Providers.tsx#Providers"]={docgenInfo:Providers.__docgenInfo,name:"Providers",path:"src/components/Providers.tsx#Providers"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Table.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>Table});var react_data_grid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-data-grid/lib/bundle.js"),_hooks_useRsi__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/hooks/useRsi.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Table=({className,...props})=>{const{rtl}=(0,_hooks_useRsi__WEBPACK_IMPORTED_MODULE_0__.j)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_data_grid__WEBPACK_IMPORTED_MODULE_2__.ZP,{className:"rdg-light "+className||0,direction:rtl?"rtl":"ltr",...props})};Table.displayName="Table";try{Table.displayName="Table",Table.__docgenInfo={description:"",displayName:"Table",props:{rowHeight:{defaultValue:null,description:"The height of each row in pixels",name:"rowHeight",required:!1,type:{name:"number"}},hiddenHeader:{defaultValue:null,description:"",name:"hiddenHeader",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Table.tsx#Table"]={docgenInfo:Table.__docgenInfo,name:"Table",path:"src/components/Table.tsx#Table"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useRsi.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>useRsi});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components_Providers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Providers.tsx");const useRsi=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_components_Providers__WEBPACK_IMPORTED_MODULE_1__.y8)},"./src/steps/MatchColumnsStep/MatchColumnsStep.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>ColumnType,E:()=>MatchColumnsStep});var react=__webpack_require__("./node_modules/react/index.js"),chunk_5LTIYV3A=__webpack_require__("./node_modules/@chakra-ui/toast/dist/chunk-5LTIYV3A.mjs"),chunk_DMO4EI7P=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),chunk_PULVB27S=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-PULVB27S.mjs"),chunk_KRPLQIP4=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-KRPLQIP4.mjs"),chunk_2OOHT3W5=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-2OOHT3W5.mjs"),chunk_6QYXN73V=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-6QYXN73V.mjs"),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js"),chunk_O3SWHQEE=__webpack_require__("./node_modules/@chakra-ui/utils/dist/chunk-O3SWHQEE.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const UserTableColumn=props=>{const styles=(0,chunk_DMO4EI7P.mq)("MatchColumnsStep"),{column:{header,index,type},entries,onIgnore,onRevertIgnore}=props,isIgnored=type===ColumnType.ignored;return(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{children:[(0,jsx_runtime.jsxs)(chunk_KRPLQIP4.k,{px:6,justifyContent:"space-between",alignItems:"center",mb:4,children:[(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.userTable.header,"data-ignored":(0,chunk_O3SWHQEE.PB)(isIgnored),children:header}),type===ColumnType.ignored?(0,jsx_runtime.jsx)(chunk_6QYXN73V.h,{"aria-label":"Ignore column",icon:(0,jsx_runtime.jsx)(index_esm.HDP,{}),onClick:()=>onRevertIgnore(index),...styles.userTable.ignoreButton}):(0,jsx_runtime.jsx)(chunk_6QYXN73V.h,{"aria-label":"Ignore column",icon:(0,jsx_runtime.jsx)(index_esm.Fk5,{}),onClick:()=>onIgnore(index),...styles.userTable.ignoreButton})]}),entries.map(((entry,index)=>(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.userTable.cell,"data-ignored":(0,chunk_O3SWHQEE.PB)(isIgnored),children:entry},(entry||"")+index)))]})};UserTableColumn.displayName="UserTableColumn";try{UserTableColumn.displayName="UserTableColumn",UserTableColumn.__docgenInfo={description:"",displayName:"UserTableColumn",props:{column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"Column<T>"}},entries:{defaultValue:null,description:"",name:"entries",required:!0,type:{name:"RawData"}},onIgnore:{defaultValue:null,description:"",name:"onIgnore",required:!0,type:{name:"(index: number) => void"}},onRevertIgnore:{defaultValue:null,description:"",name:"onRevertIgnore",required:!0,type:{name:"(index: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/MatchColumnsStep/components/UserTableColumn.tsx#UserTableColumn"]={docgenInfo:UserTableColumn.__docgenInfo,name:"UserTableColumn",path:"src/steps/MatchColumnsStep/components/UserTableColumn.tsx#UserTableColumn"})}catch(__react_docgen_typescript_loader_error){}var useRsi=__webpack_require__("./src/hooks/useRsi.ts"),chunk_CRBMUVJA=__webpack_require__("./node_modules/@chakra-ui/accordion/dist/chunk-CRBMUVJA.mjs"),chunk_JQ2DNXQ3=__webpack_require__("./node_modules/@chakra-ui/accordion/dist/chunk-JQ2DNXQ3.mjs"),chunk_QCAXGLVH=__webpack_require__("./node_modules/@chakra-ui/accordion/dist/chunk-QCAXGLVH.mjs"),chunk_YI3ICT2T=__webpack_require__("./node_modules/@chakra-ui/accordion/dist/chunk-YI3ICT2T.mjs"),chunk_5VAIMVHT=__webpack_require__("./node_modules/@chakra-ui/accordion/dist/chunk-5VAIMVHT.mjs"),chunk_ZHQNHOQS=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-ZHQNHOQS.mjs");const MotionFlex=(0,__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs").E)(chunk_KRPLQIP4.k),animationConfig={transition:{duration:.1},exit:{scale:.5,opacity:0},initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1}},MatchIcon=props=>{const style=(0,chunk_DMO4EI7P.mq)("MatchIcon",props);return(0,jsx_runtime.jsx)(chunk_ZHQNHOQS.m.div,{__css:style,minW:6,minH:6,w:6,h:6,ml:"0.875rem",mr:3,"data-highlighted":(0,chunk_O3SWHQEE.PB)(props.isChecked),"data-testid":"column-checkmark",children:props.isChecked&&(0,jsx_runtime.jsx)(MotionFlex,{...animationConfig,children:(0,jsx_runtime.jsx)(index_esm.Dey,{size:"24px"})})})};MatchIcon.displayName="MatchIcon";try{MatchIcon.displayName="MatchIcon",MatchIcon.__docgenInfo={description:"",displayName:"MatchIcon",props:{isChecked:{defaultValue:null,description:"",name:"isChecked",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/MatchColumnsStep/components/MatchIcon.tsx#MatchIcon"]={docgenInfo:MatchIcon.__docgenInfo,name:"MatchIcon",path:"src/steps/MatchColumnsStep/components/MatchIcon.tsx#MatchIcon"})}catch(__react_docgen_typescript_loader_error){}var select_select=__webpack_require__("./node_modules/chakra-react-select/dist/esm/select/select.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),chunk_UIGT7YZF=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-UIGT7YZF.mjs"),chunk_LUYFNC5G=__webpack_require__("./node_modules/@chakra-ui/popper/dist/chunk-LUYFNC5G.mjs"),Providers=__webpack_require__("./src/components/Providers.tsx");const customComponents={MenuPortal:props=>{const theme=(0,chunk_UIGT7YZF.F)(),{rtl}=(0,useRsi.j)(),{popperRef,referenceRef}=(0,chunk_LUYFNC5G.D)({strategy:"fixed",matchWidth:!0}),[wrapperElement,setWrapperElement]=(0,react.useState)(null);return(0,react.useLayoutEffect)((()=>{let element=document.getElementById("react-select-dropdown-wrapper"),systemCreated=!1;return element||(systemCreated=!0,element=function createWrapperAndAppendToBody(wrapperId){const wrapperElement=document.createElement("div");return wrapperElement.setAttribute("id",wrapperId),document.body.appendChild(wrapperElement),wrapperElement}("react-select-dropdown-wrapper")),setWrapperElement(element),()=>{systemCreated&&element?.parentNode&&element.parentNode.removeChild(element)}}),[]),(0,react.useEffect)((()=>{referenceRef(props.controlElement)}),[props.controlElement,referenceRef]),null===wrapperElement?null:react_dom.createPortal((0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{dir:rtl?"rtl":"ltr",ref:popperRef,zIndex:theme.zIndices.tooltip,sx:{"&[data-popper-reference-hidden]":{visibility:"hidden",pointerEvents:"none"}},id:Providers.c5,children:props.children}),wrapperElement)}},MatchColumnSelect=({onChange,value,options,placeholder,name})=>{const styles=(0,chunk_DMO4EI7P.mq)("MatchColumnsStep");return(0,jsx_runtime.jsx)(select_select.Z,{value:value||null,colorScheme:"gray",useBasicStyles:!0,onChange,placeholder,options,chakraStyles:styles.select,menuPosition:"fixed",components:customComponents,"aria-label":name})};MatchColumnSelect.displayName="MatchColumnSelect";try{MatchColumnSelect.displayName="MatchColumnSelect",MatchColumnSelect.__docgenInfo={description:"",displayName:"MatchColumnSelect",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: SelectOption | null) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"SelectOption"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"readonly SelectOption[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Selects/MatchColumnSelect.tsx#MatchColumnSelect"]={docgenInfo:MatchColumnSelect.__docgenInfo,name:"MatchColumnSelect",path:"src/components/Selects/MatchColumnSelect.tsx#MatchColumnSelect"})}catch(__react_docgen_typescript_loader_error){}const SubMatchingSelect=({option,column,onSubChange})=>{const styles=(0,chunk_DMO4EI7P.mq)("MatchColumnsStep"),{translations,fields}=(0,useRsi.j)(),options=((fields,fieldKey)=>{const field=fields.find((({key})=>fieldKey===key));return"select"===field.fieldType.type?field.fieldType.options:[]})(fields,column.value),value=options.find((opt=>opt.value==option.value));return(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{pl:2,pb:"0.375rem",children:[(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.selectColumn.selectLabel,children:option.entry}),(0,jsx_runtime.jsx)(MatchColumnSelect,{value,placeholder:translations.matchColumnsStep.subSelectPlaceholder,onChange:value=>onSubChange(value?.value,column.index,option.entry),options,name:option.entry})]})};SubMatchingSelect.displayName="SubMatchingSelect";try{SubMatchingSelect.displayName="SubMatchingSelect",SubMatchingSelect.__docgenInfo={description:"",displayName:"SubMatchingSelect",props:{option:{defaultValue:null,description:"",name:"option",required:!0,type:{name:"MatchedOptions<T> | Partial<MatchedOptions<T>>"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"MatchedSelectColumn<T> | MatchedSelectOptionsColumn<T>"}},onSubChange:{defaultValue:null,description:"",name:"onSubChange",required:!0,type:{name:"(val: T, index: number, option: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/MatchColumnsStep/components/SubMatchingSelect.tsx#SubMatchingSelect"]={docgenInfo:SubMatchingSelect.__docgenInfo,name:"SubMatchingSelect",path:"src/steps/MatchColumnsStep/components/SubMatchingSelect.tsx#SubMatchingSelect"})}catch(__react_docgen_typescript_loader_error){}const getAccordionTitle=(fields,column,translations)=>{const fieldLabel=fields.find((field=>"value"in column&&field.key===column.value)).label;return`${translations.matchColumnsStep.matchDropdownTitle} ${fieldLabel} (${"matchedOptions"in column&&column.matchedOptions.filter((option=>!option.value)).length} ${translations.matchColumnsStep.unmatched})`},TemplateColumn=({column,onChange,onSubChange})=>{const{translations,fields}=(0,useRsi.j)(),styles=(0,chunk_DMO4EI7P.mq)("MatchColumnsStep"),isIgnored=column.type===ColumnType.ignored,isChecked=column.type===ColumnType.matched||column.type===ColumnType.matchedCheckbox||column.type===ColumnType.matchedSelectOptions,isSelect="matchedOptions"in column,selectOptions=fields.map((({label,key})=>({value:key,label}))),selectValue=selectOptions.find((({value})=>"value"in column&&column.value===value));return(0,jsx_runtime.jsx)(chunk_KRPLQIP4.k,{minH:10,w:"100%",flexDir:"column",justifyContent:"center",children:isIgnored?(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.selectColumn.text,children:translations.matchColumnsStep.ignoredColumnText}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chunk_KRPLQIP4.k,{alignItems:"center",minH:10,w:"100%",children:[(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{flex:1,children:(0,jsx_runtime.jsx)(MatchColumnSelect,{placeholder:translations.matchColumnsStep.selectPlaceholder,value:selectValue,onChange:value=>onChange(value?.value,column.index),options:selectOptions,name:column.header})}),(0,jsx_runtime.jsx)(MatchIcon,{isChecked})]}),isSelect&&(0,jsx_runtime.jsx)(chunk_KRPLQIP4.k,{width:"100%",children:(0,jsx_runtime.jsx)(chunk_CRBMUVJA.U,{allowMultiple:!0,width:"100%",children:(0,jsx_runtime.jsxs)(chunk_JQ2DNXQ3.Q,{border:"none",py:1,children:[(0,jsx_runtime.jsxs)(chunk_QCAXGLVH.K,{_hover:{bg:"transparent"},_focus:{boxShadow:"none"},px:0,py:4,"data-testid":"accordion-button",children:[(0,jsx_runtime.jsx)(chunk_YI3ICT2T.X,{}),(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{textAlign:"left",children:(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.selectColumn.accordionLabel,children:getAccordionTitle(fields,column,translations)})})]}),(0,jsx_runtime.jsx)(chunk_5VAIMVHT.H,{pb:4,pr:3,display:"flex",flexDir:"column",children:column.matchedOptions.map((option=>(0,jsx_runtime.jsx)(SubMatchingSelect,{option,column,onSubChange},option.entry)))})]})})})]})})};TemplateColumn.displayName="TemplateColumn";try{TemplateColumn.displayName="TemplateColumn",TemplateColumn.__docgenInfo={description:"",displayName:"TemplateColumn",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(val: T, index: number) => void"}},onSubChange:{defaultValue:null,description:"",name:"onSubChange",required:!0,type:{name:"(val: T, index: number, option: string) => void"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"Column<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/MatchColumnsStep/components/TemplateColumn.tsx#TemplateColumn"]={docgenInfo:TemplateColumn.__docgenInfo,name:"TemplateColumn",path:"src/steps/MatchColumnsStep/components/TemplateColumn.tsx#TemplateColumn"})}catch(__react_docgen_typescript_loader_error){}var chunk_OFOVX77R=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OFOVX77R.mjs"),chunk_7OLJDQMT=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-7OLJDQMT.mjs");const FadingWrapper=({gridColumn,gridRow})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{gridColumn,gridRow,borderRadius:"1.2rem",border:"1px solid",borderColor:"border",pointerEvents:"none"}),(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{gridColumn,gridRow,pointerEvents:"none",bgGradient:"linear(to bottom, backgroundAlpha, background)"})]});try{FadingWrapper.displayName="FadingWrapper",FadingWrapper.__docgenInfo={description:"",displayName:"FadingWrapper",props:{gridColumn:{defaultValue:null,description:"",name:"gridColumn",required:!0,type:{name:"string"}},gridRow:{defaultValue:null,description:"",name:"gridRow",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FadingWrapper.tsx#FadingWrapper"]={docgenInfo:FadingWrapper.__docgenInfo,name:"FadingWrapper",path:"src/components/FadingWrapper.tsx#FadingWrapper"})}catch(__react_docgen_typescript_loader_error){}var ContinueButton=__webpack_require__("./src/components/ContinueButton.tsx");const ColumnGrid=({columns,userColumn,templateColumn,onContinue,onBack,isLoading})=>{const{translations}=(0,useRsi.j)(),styles=(0,chunk_DMO4EI7P.mq)("MatchColumnsStep");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chunk_OFOVX77R.f,{flexDir:"column",p:8,overflow:"auto",children:[(0,jsx_runtime.jsx)(chunk_7OLJDQMT.X,{sx:styles.heading,children:translations.matchColumnsStep.title}),(0,jsx_runtime.jsxs)(chunk_KRPLQIP4.k,{flex:1,display:"grid",gridTemplateRows:"auto auto auto 1fr",gridTemplateColumns:`0.75rem repeat(${columns.length}, minmax(18rem, auto)) 0.75rem`,children:[(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{gridColumn:`1/${columns.length+3}`,children:(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.title,children:translations.matchColumnsStep.userTableTitle})}),columns.map(((column,index)=>(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{gridRow:"2/3",gridColumn:`${index+2}/${index+3}`,pt:3,children:userColumn(column)},column.header+index))),(0,jsx_runtime.jsx)(FadingWrapper,{gridColumn:`1/${columns.length+3}`,gridRow:"2/3"}),(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{gridColumn:`1/${columns.length+3}`,mt:7,children:(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.title,children:translations.matchColumnsStep.templateTitle})}),(0,jsx_runtime.jsx)(FadingWrapper,{gridColumn:`1/${columns.length+3}`,gridRow:"4/5"}),columns.map(((column,index)=>(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{gridRow:"4/5",gridColumn:`${index+2}/${index+3}`,py:"1.125rem",pl:2,pr:3,children:templateColumn(column)},column.header+index)))]})]}),(0,jsx_runtime.jsx)(ContinueButton.f,{isLoading,onContinue,onBack,title:translations.matchColumnsStep.nextButtonTitle,backTitle:translations.matchColumnsStep.backButtonTitle})]})};try{ColumnGrid.displayName="ColumnGrid",ColumnGrid.__docgenInfo={description:"",displayName:"ColumnGrid",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"Columns<T>"}},userColumn:{defaultValue:null,description:"",name:"userColumn",required:!0,type:{name:"(column: Column<T>) => ReactNode"}},templateColumn:{defaultValue:null,description:"",name:"templateColumn",required:!0,type:{name:"(column: Column<T>) => ReactNode"}},onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(val: Record<string, string>[]) => void"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/MatchColumnsStep/components/ColumnGrid.tsx#ColumnGrid"]={docgenInfo:ColumnGrid.__docgenInfo,name:"ColumnGrid",path:"src/steps/MatchColumnsStep/components/ColumnGrid.tsx#ColumnGrid"})}catch(__react_docgen_typescript_loader_error){}var uniqBy=__webpack_require__("./node_modules/lodash/uniqBy.js"),uniqBy_default=__webpack_require__.n(uniqBy);const setColumn=(oldColumn,field,data,autoMapSelectValues)=>{switch(field?.fieldType.type){case"select":const fieldOptions=field.fieldType.options,uniqueData=((data,index)=>uniqBy_default()(data.map((row=>({entry:row[index]}))),"entry").filter((({entry})=>!!entry)))(data||[],oldColumn.index),matchedOptions=autoMapSelectValues?uniqueData.map((record=>{const value=fieldOptions.find((fieldOption=>fieldOption.value===record.entry||fieldOption.label===record.entry))?.value;return value?{...record,value}:record})):uniqueData,allMatched=matchedOptions.filter((o=>o.value)).length==uniqueData?.length;return{...oldColumn,type:allMatched?ColumnType.matchedSelectOptions:ColumnType.matchedSelect,value:field.key,matchedOptions};case"checkbox":return{index:oldColumn.index,type:ColumnType.matchedCheckbox,value:field.key,header:oldColumn.header};case"input":return{index:oldColumn.index,type:ColumnType.matched,value:field.key,header:oldColumn.header};default:return{index:oldColumn.index,header:oldColumn.header,type:ColumnType.empty}}},booleanWhitelist={yes:!0,no:!1,true:!0,false:!1},normalizeCheckboxValue=value=>!(!value||!(value.toLowerCase()in booleanWhitelist))&&booleanWhitelist[value.toLowerCase()],normalizeTableData=(columns,data,fields)=>data.map((row=>columns.reduce(((acc,column,index)=>{const curr=row[index];switch(column.type){case ColumnType.matchedCheckbox:{const field=fields.find((field=>field.key===column.value));if("booleanMatches"in field.fieldType&&Object.keys(field.fieldType).length){const booleanMatchKey=Object.keys(field.fieldType.booleanMatches||[]).find((key=>key.toLowerCase()===curr?.toLowerCase())),booleanMatch=field.fieldType.booleanMatches?.[booleanMatchKey];acc[column.value]=booleanMatchKey?booleanMatch:normalizeCheckboxValue(curr)}else acc[column.value]=normalizeCheckboxValue(curr);return acc}case ColumnType.matched:return acc[column.value]=""===curr?void 0:curr,acc;case ColumnType.matchedSelect:case ColumnType.matchedSelectOptions:{const matchedOption=column.matchedOptions.find((({entry,value})=>entry===curr));return acc[column.value]=matchedOption?.value||void 0,acc}case ColumnType.empty:case ColumnType.ignored:default:return acc}}),{})));var js_levenshtein=__webpack_require__("./node_modules/js-levenshtein/index.js"),js_levenshtein_default=__webpack_require__.n(js_levenshtein);const getMatchedColumns=(columns,fields,data,autoMapDistance,autoMapSelectValues)=>columns.reduce(((arr,column)=>{const autoMatch=((header,fields,autoMapDistance)=>{const smallestValue=fields.reduce(((acc,field)=>{const distance=Math.min(js_levenshtein_default()(field.key,header),...field.alternateMatches?.map((alternate=>js_levenshtein_default()(alternate,header)))||[]);return distance<acc.distance||void 0===acc.distance?{value:field.key,distance}:acc}),{});return smallestValue.distance<=autoMapDistance?smallestValue.value:void 0})(column.header,fields,autoMapDistance);if(autoMatch){const field=fields.find((field=>field.key===autoMatch)),duplicateIndex=arr.findIndex((column=>"value"in column&&column.value===field.key)),duplicate=arr[duplicateIndex];return duplicate&&"value"in duplicate?js_levenshtein_default()(duplicate.value,duplicate.header)<js_levenshtein_default()(autoMatch,column.header)?[...arr.slice(0,duplicateIndex),setColumn(arr[duplicateIndex],field,data,autoMapSelectValues),...arr.slice(duplicateIndex+1),setColumn(column)]:[...arr.slice(0,duplicateIndex),setColumn(arr[duplicateIndex]),...arr.slice(duplicateIndex+1),setColumn(column,field,data,autoMapSelectValues)]:[...arr,setColumn(column,field,data,autoMapSelectValues)]}return[...arr,column]}),[]);var chunk_FQDHE43W=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-FQDHE43W.mjs"),chunk_JQMJHPZH=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-JQMJHPZH.mjs"),chunk_5FG5SY5K=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-5FG5SY5K.mjs"),chunk_RAWN7VJ3=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-RAWN7VJ3.mjs"),chunk_UVUR7MCU=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-UVUR7MCU.mjs");const UnmatchedFieldsAlert=({isOpen,onClose,onConfirm,fields})=>{const{allowInvalidSubmit,translations}=(0,useRsi.j)(),cancelRef=(0,react.useRef)(null);return(0,jsx_runtime.jsx)(chunk_FQDHE43W.a,{isOpen,onClose,leastDestructiveRef:cancelRef,isCentered:!0,id:"rsi",children:(0,jsx_runtime.jsx)(chunk_JQMJHPZH.Z,{children:(0,jsx_runtime.jsxs)(chunk_FQDHE43W._,{children:[(0,jsx_runtime.jsx)(chunk_5FG5SY5K.x,{fontSize:"lg",fontWeight:"bold",children:translations.alerts.unmatchedRequiredFields.headerTitle}),(0,jsx_runtime.jsxs)(chunk_OFOVX77R.f,{children:[translations.alerts.unmatchedRequiredFields.bodyText,(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{pt:3,children:[(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{display:"inline",children:translations.alerts.unmatchedRequiredFields.listTitle}),(0,jsx_runtime.jsxs)(chunk_2OOHT3W5.x,{display:"inline",fontWeight:"bold",children:[" ",fields.join(", ")]})]})]}),(0,jsx_runtime.jsxs)(chunk_RAWN7VJ3.m,{children:[(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{ref:cancelRef,onClick:onClose,variant:"secondary",children:translations.alerts.unmatchedRequiredFields.cancelButtonTitle}),allowInvalidSubmit&&(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{onClick:onConfirm,ml:3,children:translations.alerts.unmatchedRequiredFields.continueButtonTitle})]})]})})})};UnmatchedFieldsAlert.displayName="UnmatchedFieldsAlert";try{UnmatchedFieldsAlert.displayName="UnmatchedFieldsAlert",UnmatchedFieldsAlert.__docgenInfo={description:"",displayName:"UnmatchedFieldsAlert",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Alerts/UnmatchedFieldsAlert.tsx#UnmatchedFieldsAlert"]={docgenInfo:UnmatchedFieldsAlert.__docgenInfo,name:"UnmatchedFieldsAlert",path:"src/components/Alerts/UnmatchedFieldsAlert.tsx#UnmatchedFieldsAlert"})}catch(__react_docgen_typescript_loader_error){}let ColumnType=function(ColumnType){return ColumnType[ColumnType.empty=0]="empty",ColumnType[ColumnType.ignored=1]="ignored",ColumnType[ColumnType.matched=2]="matched",ColumnType[ColumnType.matchedCheckbox=3]="matchedCheckbox",ColumnType[ColumnType.matchedSelect=4]="matchedSelect",ColumnType[ColumnType.matchedSelectOptions=5]="matchedSelectOptions",ColumnType}({});const MatchColumnsStep=({data,headerValues,onContinue,onBack})=>{const toast=(0,chunk_5LTIYV3A.p)(),dataExample=data.slice(0,2),{fields,autoMapHeaders,autoMapSelectValues,autoMapDistance,translations}=(0,useRsi.j)(),[isLoading,setIsLoading]=(0,react.useState)(!1),[columns,setColumns]=(0,react.useState)([...headerValues].map(((value,index)=>({type:ColumnType.empty,index,header:value??""})))),[showUnmatchedFieldsAlert,setShowUnmatchedFieldsAlert]=(0,react.useState)(!1),onChange=(0,react.useCallback)(((value,columnIndex)=>{const field=fields.find((field=>field.key===value)),existingFieldIndex=columns.findIndex((column=>"value"in column&&column.value===field.key));setColumns(columns.map(((column,index)=>(columnIndex===index&&setColumn(column,field,data),columnIndex===index?setColumn(column,field,data,autoMapSelectValues):index===existingFieldIndex?(toast({status:"warning",variant:"left-accent",position:"bottom-left",title:translations.matchColumnsStep.duplicateColumnWarningTitle,description:translations.matchColumnsStep.duplicateColumnWarningDescription,isClosable:!0}),setColumn(column)):column))))}),[autoMapSelectValues,columns,data,fields,toast,translations.matchColumnsStep.duplicateColumnWarningDescription,translations.matchColumnsStep.duplicateColumnWarningTitle]),onIgnore=(0,react.useCallback)((columnIndex=>{setColumns(columns.map(((column,index)=>columnIndex===index?(({header,index})=>({header,index,type:ColumnType.ignored}))(column):column)))}),[columns,setColumns]),onRevertIgnore=(0,react.useCallback)((columnIndex=>{setColumns(columns.map(((column,index)=>columnIndex===index?setColumn(column):column)))}),[columns,setColumns]),onSubChange=(0,react.useCallback)(((value,columnIndex,entry)=>{setColumns(columns.map(((column,index)=>columnIndex===index&&"matchedOptions"in column?((oldColumn,entry,value)=>{const options=oldColumn.matchedOptions.map((option=>option.entry===entry?{...option,value}:option)),allMathced=options.every((({value})=>!!value));return allMathced?{...oldColumn,matchedOptions:options,type:ColumnType.matchedSelectOptions}:{...oldColumn,matchedOptions:options,type:ColumnType.matchedSelect}})(column,entry,value):column)))}),[columns,setColumns]),unmatchedRequiredFields=(0,react.useMemo)((()=>((fields,columns)=>fields.filter((field=>field.validations?.some((validation=>"required"===validation.rule)))).filter((field=>-1===columns.findIndex((column=>"value"in column&&column.value===field.key)))).map((field=>field.label))||[])(fields,columns)),[fields,columns]),handleOnContinue=(0,react.useCallback)((async()=>{unmatchedRequiredFields.length>0?setShowUnmatchedFieldsAlert(!0):(setIsLoading(!0),await onContinue(normalizeTableData(columns,data,fields),data,columns),setIsLoading(!1))}),[unmatchedRequiredFields.length,onContinue,columns,data,fields]),handleAlertOnContinue=(0,react.useCallback)((async()=>{setShowUnmatchedFieldsAlert(!1),setIsLoading(!0),await onContinue(normalizeTableData(columns,data,fields),data,columns),setIsLoading(!1)}),[onContinue,columns,data,fields]);return(0,react.useEffect)((()=>{autoMapHeaders&&setColumns(getMatchedColumns(columns,fields,data,autoMapDistance,autoMapSelectValues))}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnmatchedFieldsAlert,{isOpen:showUnmatchedFieldsAlert,onClose:()=>setShowUnmatchedFieldsAlert(!1),fields:unmatchedRequiredFields,onConfirm:handleAlertOnContinue}),(0,jsx_runtime.jsx)(ColumnGrid,{columns,onContinue:handleOnContinue,onBack,isLoading,userColumn:column=>(0,jsx_runtime.jsx)(UserTableColumn,{column,onIgnore,onRevertIgnore,entries:dataExample.map((row=>row[column.index]))}),templateColumn:column=>(0,jsx_runtime.jsx)(TemplateColumn,{column,onChange,onSubChange})})]})};try{MatchColumnsStep.displayName="MatchColumnsStep",MatchColumnsStep.__docgenInfo={description:"",displayName:"MatchColumnsStep",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"RawData[]"}},headerValues:{defaultValue:null,description:"",name:"headerValues",required:!0,type:{name:"RawData"}},onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(data: any[], rawData: RawData[], columns: Columns<T>) => void"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/MatchColumnsStep/MatchColumnsStep.tsx#MatchColumnsStep"]={docgenInfo:MatchColumnsStep.__docgenInfo,name:"MatchColumnsStep",path:"src/steps/MatchColumnsStep/MatchColumnsStep.tsx#MatchColumnsStep"})}catch(__react_docgen_typescript_loader_error){}},"./src/steps/SelectHeaderStep/SelectHeaderStep.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>SelectHeaderStep});var react=__webpack_require__("./node_modules/react/index.js"),chunk_DMO4EI7P=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),chunk_OFOVX77R=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OFOVX77R.mjs"),chunk_7OLJDQMT=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-7OLJDQMT.mjs"),Table=__webpack_require__("./src/components/Table.tsx"),bundle=__webpack_require__("./node_modules/react-data-grid/lib/bundle.js"),chunk_RDF2AYID=__webpack_require__("./node_modules/@chakra-ui/radio/dist/chunk-RDF2AYID.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function SelectFormatter(props){const[isRowSelected,onRowSelectionChange]=(0,bundle.Gt)();return(0,jsx_runtime.jsx)(chunk_RDF2AYID.Y,{bg:"white","aria-label":"Select",isChecked:isRowSelected,onChange:event=>{onRowSelectionChange({row:props.row,checked:Boolean(event.target.checked),isShiftClick:event.nativeEvent.shiftKey})}})}SelectFormatter.displayName="SelectFormatter";const SelectColumn={key:"select-row",name:"",width:35,minWidth:35,maxWidth:35,resizable:!1,sortable:!1,frozen:!0,cellClass:"rdg-radio",formatter:SelectFormatter},generateSelectionColumns=data=>{const longestRowLength=data.reduce(((acc,curr)=>acc>curr.length?acc:curr.length),0);return[SelectColumn,...Array.from(Array(longestRowLength),((_,index)=>({key:index.toString(),name:""})))]};try{generateSelectionColumns.displayName="generateSelectionColumns",generateSelectionColumns.__docgenInfo={description:"",displayName:"generateSelectionColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/SelectHeaderStep/components/columns.tsx#generateSelectionColumns"]={docgenInfo:generateSelectionColumns.__docgenInfo,name:"generateSelectionColumns",path:"src/steps/SelectHeaderStep/components/columns.tsx#generateSelectionColumns"})}catch(__react_docgen_typescript_loader_error){}const SelectHeaderTable=({data,selectedRows,setSelectedRows})=>{const columns=(0,react.useMemo)((()=>generateSelectionColumns(data)),[data]);return(0,jsx_runtime.jsx)(Table.i,{rowKeyGetter:row=>data.indexOf(row),rows:data,columns,selectedRows,onSelectedRowsChange:newRows=>{newRows.forEach((value=>{selectedRows.has(value)||setSelectedRows(new Set([value]))}))},onRowClick:row=>{setSelectedRows(new Set([data.indexOf(row)]))},headerRowHeight:0,className:"rdg-static"})};SelectHeaderTable.displayName="SelectHeaderTable";try{SelectHeaderTable.displayName="SelectHeaderTable",SelectHeaderTable.__docgenInfo={description:"",displayName:"SelectHeaderTable",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"RawData[]"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!0,type:{name:"ReadonlySet<number>"}},setSelectedRows:{defaultValue:null,description:"",name:"setSelectedRows",required:!0,type:{name:"(rows: ReadonlySet<number>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/SelectHeaderStep/components/SelectHeaderTable.tsx#SelectHeaderTable"]={docgenInfo:SelectHeaderTable.__docgenInfo,name:"SelectHeaderTable",path:"src/steps/SelectHeaderStep/components/SelectHeaderTable.tsx#SelectHeaderTable"})}catch(__react_docgen_typescript_loader_error){}var ContinueButton=__webpack_require__("./src/components/ContinueButton.tsx"),useRsi=__webpack_require__("./src/hooks/useRsi.ts");const SelectHeaderStep=({data,onContinue,onBack})=>{const styles=(0,chunk_DMO4EI7P.mq)("SelectHeaderStep"),{translations}=(0,useRsi.j)(),[selectedRows,setSelectedRows]=(0,react.useState)(new Set([0])),[isLoading,setIsLoading]=(0,react.useState)(!1),handleContinue=(0,react.useCallback)((async()=>{const[selectedRowIndex]=selectedRows,trimmedData=data.slice(selectedRowIndex+1);setIsLoading(!0),await onContinue(data[selectedRowIndex],trimmedData),setIsLoading(!1)}),[onContinue,data,selectedRows]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chunk_OFOVX77R.f,{pb:0,children:[(0,jsx_runtime.jsx)(chunk_7OLJDQMT.X,{...styles.heading,children:translations.selectHeaderStep.title}),(0,jsx_runtime.jsx)(SelectHeaderTable,{data,selectedRows,setSelectedRows})]}),(0,jsx_runtime.jsx)(ContinueButton.f,{onContinue:handleContinue,onBack,title:translations.selectHeaderStep.nextButtonTitle,backTitle:translations.selectHeaderStep.backButtonTitle,isLoading})]})};try{SelectHeaderStep.displayName="SelectHeaderStep",SelectHeaderStep.__docgenInfo={description:"",displayName:"SelectHeaderStep",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"RawData[]"}},onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(headerValues: RawData, data: RawData[]) => Promise<void>"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/SelectHeaderStep/SelectHeaderStep.tsx#SelectHeaderStep"]={docgenInfo:SelectHeaderStep.__docgenInfo,name:"SelectHeaderStep",path:"src/steps/SelectHeaderStep/SelectHeaderStep.tsx#SelectHeaderStep"})}catch(__react_docgen_typescript_loader_error){}},"./src/steps/SelectSheetStep/SelectSheetStep.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>SelectSheetStep});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OFOVX77R.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-7OLJDQMT.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@chakra-ui/radio/dist/chunk-FESYGSQT.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-ZHMYA64R.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@chakra-ui/radio/dist/chunk-RDF2AYID.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-2OOHT3W5.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components_ContinueButton__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ContinueButton.tsx"),_hooks_useRsi__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/useRsi.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const SelectSheetStep=({sheetNames,onContinue,onBack})=>{const[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),{translations}=(0,_hooks_useRsi__WEBPACK_IMPORTED_MODULE_2__.j)(),[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(sheetNames[0]),styles=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.mq)("SelectSheetStep"),handleOnContinue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((async data=>{setIsLoading(!0),await onContinue(data),setIsLoading(!1)}),[onContinue]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__.f,{alignItems:"center",justifyContent:"center",p:8,flex:1,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_6__.X,{...styles.heading,children:translations.uploadStep.selectSheet.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.E,{onChange:value=>setValue(value),value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.K,{spacing:8,children:sheetNames.map((sheetName=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_9__.Y,{value:sheetName,...styles.radio,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_10__.x,{...styles.radioLabel,children:sheetName})},sheetName)))})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components_ContinueButton__WEBPACK_IMPORTED_MODULE_1__.f,{isLoading,onContinue:()=>handleOnContinue(value),onBack,title:translations.uploadStep.selectSheet.nextButtonTitle,backTitle:translations.uploadStep.selectSheet.backButtonTitle})]})};try{SelectSheetStep.displayName="SelectSheetStep",SelectSheetStep.__docgenInfo={description:"",displayName:"SelectSheetStep",props:{sheetNames:{defaultValue:null,description:"",name:"sheetNames",required:!0,type:{name:"string[]"}},onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(sheetName: string) => Promise<void>"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/SelectSheetStep/SelectSheetStep.tsx#SelectSheetStep"]={docgenInfo:SelectSheetStep.__docgenInfo,name:"SelectSheetStep",path:"src/steps/SelectSheetStep/SelectSheetStep.tsx#SelectSheetStep"})}catch(__react_docgen_typescript_loader_error){}},"./src/steps/UploadStep/UploadStep.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>UploadStep});var chunk_DMO4EI7P=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),chunk_OFOVX77R=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OFOVX77R.mjs"),chunk_7OLJDQMT=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-7OLJDQMT.mjs"),chunk_2OOHT3W5=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-2OOHT3W5.mjs"),chunk_PULVB27S=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-PULVB27S.mjs"),chunk_5LTIYV3A=__webpack_require__("./node_modules/@chakra-ui/toast/dist/chunk-5LTIYV3A.mjs"),chunk_UVUR7MCU=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-UVUR7MCU.mjs"),es=__webpack_require__("./node_modules/react-dropzone/dist/es/index.js"),xlsx=__webpack_require__("./node_modules/xlsx-ugnis/xlsx.mjs"),react=__webpack_require__("./node_modules/react/index.js");var useRsi=__webpack_require__("./src/hooks/useRsi.ts");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DropZone=({onContinue,isLoading})=>{const{translations,maxFileSize,dateFormat,parseRaw}=(0,useRsi.j)(),styles=(0,chunk_DMO4EI7P.mq)("UploadStep"),toast=(0,chunk_5LTIYV3A.p)(),[loading,setLoading]=(0,react.useState)(!1),{getRootProps,getInputProps,isDragActive,open}=(0,es.uI)({noClick:!0,noKeyboard:!0,maxFiles:1,maxSize:maxFileSize,accept:{"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/csv":[".csv"]},onDropRejected:fileRejections=>{setLoading(!1),fileRejections.forEach((fileRejection=>{toast({status:"error",variant:"left-accent",position:"bottom-left",title:`${fileRejection.file.name} ${translations.uploadStep.dropzone.errorToastDescription}`,description:fileRejection.errors[0].message,isClosable:!0})}))},onDropAccepted:async([file])=>{setLoading(!0);const arrayBuffer=await(file=>new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onload=()=>{resolve(reader.result)},reader.onerror=reject,reader.readAsArrayBuffer(file)})))(file),workbook=xlsx.ij(arrayBuffer,{cellDates:!0,dateNF:dateFormat,raw:parseRaw,dense:!0,codepage:65001});setLoading(!1),onContinue(workbook,file)}});return(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{...getRootProps(),...(color=styles.dropZoneBorder,{bgGradient:`repeating-linear(0deg, ${color}, ${color} 10px, transparent 10px, transparent 20px, ${color} 20px), repeating-linear-gradient(90deg, ${color}, ${color} 10px, transparent 10px, transparent 20px, ${color} 20px), repeating-linear-gradient(180deg, ${color}, ${color} 10px, transparent 10px, transparent 20px, ${color} 20px), repeating-linear-gradient(270deg, ${color}, ${color} 10px, transparent 10px, transparent 20px, ${color} 20px)`,backgroundSize:"2px 100%, 100% 2px, 2px 100% , 100% 2px",backgroundPosition:"0 0, 0 0, 100% 0, 0 100%",backgroundRepeat:"no-repeat",borderRadius:"4px"}),width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:1,children:[(0,jsx_runtime.jsx)("input",{...getInputProps(),"data-testid":"rsi-dropzone"}),isDragActive?(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.dropzoneText,children:translations.uploadStep.dropzone.activeDropzoneTitle}):loading||isLoading?(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.dropzoneText,children:translations.uploadStep.dropzone.loadingTitle}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.dropzoneText,children:translations.uploadStep.dropzone.title}),(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{sx:styles.dropzoneButton,onClick:open,children:translations.uploadStep.dropzone.buttonTitle})]})]});var color};DropZone.displayName="DropZone";try{DropZone.displayName="DropZone",DropZone.__docgenInfo={description:"",displayName:"DropZone",props:{onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(data: WorkBook, file: File) => void"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/UploadStep/components/DropZone.tsx#DropZone"]={docgenInfo:DropZone.__docgenInfo,name:"DropZone",path:"src/steps/UploadStep/components/DropZone.tsx#DropZone"})}catch(__react_docgen_typescript_loader_error){}var Table=__webpack_require__("./src/components/Table.tsx"),chunk_KICXRNWJ=__webpack_require__("./node_modules/@chakra-ui/tooltip/dist/chunk-KICXRNWJ.mjs"),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js");const generateColumns=fields=>fields.map((column=>({key:column.key,name:column.label,minWidth:150,headerRenderer:()=>(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{display:"flex",gap:1,alignItems:"center",position:"relative",children:[(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{flex:1,overflow:"hidden",textOverflow:"ellipsis",children:column.label}),column.description&&(0,jsx_runtime.jsx)(chunk_KICXRNWJ.u,{placement:"top",hasArrow:!0,label:column.description,children:(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{flex:"0 0 auto",children:(0,jsx_runtime.jsx)(index_esm.mnD,{size:"16px"})})})]}),formatter:({row})=>(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{minWidth:"100%",minHeight:"100%",overflow:"hidden",textOverflow:"ellipsis",children:row[column.key]})})));try{generateColumns.displayName="generateColumns",generateColumns.__docgenInfo={description:"",displayName:"generateColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/UploadStep/components/columns.tsx#generateColumns"]={docgenInfo:generateColumns.__docgenInfo,name:"generateColumns",path:"src/steps/UploadStep/components/columns.tsx#generateColumns"})}catch(__react_docgen_typescript_loader_error){}const titleMap={checkbox:"Boolean",select:"Options",input:"Text"},ExampleTable=({fields})=>{const data=(0,react.useMemo)((()=>(fields=>[fields.reduce(((acc,field)=>(acc[field.key]=field.example||titleMap[field.fieldType.type],acc)),{})])(fields)),[fields]),columns=(0,react.useMemo)((()=>generateColumns(fields)),[fields]);return(0,jsx_runtime.jsx)(Table.i,{rows:data,columns,className:"rdg-example"})};ExampleTable.displayName="ExampleTable";try{ExampleTable.displayName="ExampleTable",ExampleTable.__docgenInfo={description:"",displayName:"ExampleTable",props:{fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"readonly { readonly label: string; readonly key: DeepReadonly<T>; readonly description?: string | undefined; readonly alternateMatches?: readonly string[] | undefined; readonly validations?: readonly ({ ...; } | ... 1 more ... | { ...; })[] | undefined; readonly fieldType: { ...; } | ... 1 more ... | { ...; }; reado..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/UploadStep/components/ExampleTable.tsx#ExampleTable"]={docgenInfo:ExampleTable.__docgenInfo,name:"ExampleTable",path:"src/steps/UploadStep/components/ExampleTable.tsx#ExampleTable"})}catch(__react_docgen_typescript_loader_error){}const FadingOverlay=()=>(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{position:"absolute",left:0,right:0,bottom:0,height:"48px",pointerEvents:"none",bgGradient:"linear(to bottom, backgroundAlpha, background)"});FadingOverlay.displayName="FadingOverlay";const UploadStep=({onContinue})=>{const[isLoading,setIsLoading]=(0,react.useState)(!1),styles=(0,chunk_DMO4EI7P.mq)("UploadStep"),{translations,fields}=(0,useRsi.j)(),handleOnContinue=(0,react.useCallback)((async(data,file)=>{setIsLoading(!0),await onContinue(data,file),setIsLoading(!1)}),[onContinue]);return(0,jsx_runtime.jsxs)(chunk_OFOVX77R.f,{children:[(0,jsx_runtime.jsx)(chunk_7OLJDQMT.X,{sx:styles.heading,children:translations.uploadStep.title}),(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.title,children:translations.uploadStep.manifestTitle}),(0,jsx_runtime.jsx)(chunk_2OOHT3W5.x,{sx:styles.subtitle,children:translations.uploadStep.manifestDescription}),(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{sx:styles.tableWrapper,children:[(0,jsx_runtime.jsx)(ExampleTable,{fields}),(0,jsx_runtime.jsx)(FadingOverlay,{})]}),(0,jsx_runtime.jsx)(DropZone,{onContinue:handleOnContinue,isLoading})]})};UploadStep.displayName="UploadStep";try{UploadStep.displayName="UploadStep",UploadStep.__docgenInfo={description:"",displayName:"UploadStep",props:{onContinue:{defaultValue:null,description:"",name:"onContinue",required:!0,type:{name:"(data: WorkBook, file: File) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/UploadStep/UploadStep.tsx#UploadStep"]={docgenInfo:UploadStep.__docgenInfo,name:"UploadStep",path:"src/steps/UploadStep/UploadStep.tsx#UploadStep"})}catch(__react_docgen_typescript_loader_error){}},"./src/steps/ValidationStep/ValidationStep.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>ValidationStep});var react=__webpack_require__("./node_modules/react/index.js"),chunk_DMO4EI7P=__webpack_require__("./node_modules/@chakra-ui/system/dist/chunk-DMO4EI7P.mjs"),chunk_5LTIYV3A=__webpack_require__("./node_modules/@chakra-ui/toast/dist/chunk-5LTIYV3A.mjs"),chunk_OFOVX77R=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OFOVX77R.mjs"),chunk_PULVB27S=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-PULVB27S.mjs"),chunk_7OLJDQMT=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-7OLJDQMT.mjs"),chunk_UVUR7MCU=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-UVUR7MCU.mjs"),chunk_VTV6N5LE=__webpack_require__("./node_modules/@chakra-ui/switch/dist/chunk-VTV6N5LE.mjs"),ContinueButton=__webpack_require__("./src/components/ContinueButton.tsx"),useRsi=__webpack_require__("./src/hooks/useRsi.ts"),dataMutations=__webpack_require__("./src/steps/ValidationStep/utils/dataMutations.ts"),bundle=__webpack_require__("./node_modules/react-data-grid/lib/bundle.js"),chunk_CWVAJCXJ=__webpack_require__("./node_modules/@chakra-ui/checkbox/dist/chunk-CWVAJCXJ.mjs"),chunk_KICXRNWJ=__webpack_require__("./node_modules/@chakra-ui/tooltip/dist/chunk-KICXRNWJ.mjs"),chunk_6CVSDS6C=__webpack_require__("./node_modules/@chakra-ui/input/dist/chunk-6CVSDS6C.mjs"),index_esm=__webpack_require__("./node_modules/react-icons/cg/index.esm.js"),Providers=__webpack_require__("./src/components/Providers.tsx"),select_select=__webpack_require__("./node_modules/chakra-react-select/dist/esm/select/select.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableSelect=({onChange,value,options})=>{const styles=(0,chunk_DMO4EI7P.mq)("ValidationStep");return(0,jsx_runtime.jsx)(select_select.Z,{autoFocus:!0,useBasicStyles:!0,size:"sm",value,onChange,placeholder:" ",closeMenuOnScroll:!0,menuPosition:"fixed",menuIsOpen:!0,menuPortalTarget:document.getElementById(Providers.c5),options,chakraStyles:styles.select})};TableSelect.displayName="TableSelect";try{TableSelect.displayName="TableSelect",TableSelect.__docgenInfo={description:"",displayName:"TableSelect",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: SelectOption | null) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"SelectOption"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"readonly SelectOption[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Selects/TableSelect.tsx#TableSelect"]={docgenInfo:TableSelect.__docgenInfo,name:"TableSelect",path:"src/components/Selects/TableSelect.tsx#TableSelect"})}catch(__react_docgen_typescript_loader_error){}function autoFocusAndSelect(input){input?.focus(),input?.select()}const generateColumns=fields=>[{key:"select-row",name:"",width:35,minWidth:35,maxWidth:35,resizable:!1,sortable:!1,frozen:!0,cellClass:"rdg-checkbox",formatter:props=>{const[isRowSelected,onRowSelectionChange]=(0,bundle.Gt)();return(0,jsx_runtime.jsx)(chunk_CWVAJCXJ.X,{bg:"white","aria-label":"Select",isChecked:isRowSelected,onChange:event=>{onRowSelectionChange({row:props.row,checked:Boolean(event.target.checked),isShiftClick:event.nativeEvent.shiftKey})}})}},...fields.map((column=>({key:column.key,name:column.label,minWidth:150,resizable:!0,headerRenderer:()=>(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{display:"flex",gap:1,alignItems:"center",position:"relative",children:[(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{flex:1,overflow:"hidden",textOverflow:"ellipsis",children:column.label}),column.description&&(0,jsx_runtime.jsx)(chunk_KICXRNWJ.u,{placement:"top",hasArrow:!0,label:column.description,children:(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{flex:"0 0 auto",children:(0,jsx_runtime.jsx)(index_esm.mnD,{size:"16px"})})})]}),editable:"checkbox"!==column.fieldType.type,editor:({row,onRowChange,onClose})=>{let component;if("select"===column.fieldType.type)component=(0,jsx_runtime.jsx)(TableSelect,{value:column.fieldType.options.find((option=>option.value===row[column.key])),onChange:value=>{onRowChange({...row,[column.key]:value?.value},!0)},options:column.fieldType.options});else component=(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{paddingInlineStart:"0.5rem",children:(0,jsx_runtime.jsx)(chunk_6CVSDS6C.I,{ref:autoFocusAndSelect,variant:"unstyled",autoFocus:!0,size:"small",value:row[column.key],onChange:event=>{onRowChange({...row,[column.key]:event.target.value})},onBlur:()=>onClose(!0)})});return component},editorOptions:{editOnClick:!0},formatter:({row,onRowChange})=>{let component;switch(column.fieldType.type){case"checkbox":component=(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{display:"flex",alignItems:"center",height:"100%",onClick:event=>{event.stopPropagation()},children:(0,jsx_runtime.jsx)(chunk_VTV6N5LE.r,{isChecked:row[column.key],onChange:()=>{onRowChange({...row,[column.key]:!row[column.key]})}})});break;case"select":component=(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{minWidth:"100%",minHeight:"100%",overflow:"hidden",textOverflow:"ellipsis",children:column.fieldType.options.find((option=>option.value===row[column.key]))?.label||null});break;default:component=(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{minWidth:"100%",minHeight:"100%",overflow:"hidden",textOverflow:"ellipsis",children:row[column.key]})}return row.__errors?.[column.key]?(0,jsx_runtime.jsx)(chunk_KICXRNWJ.u,{placement:"top",hasArrow:!0,label:row.__errors?.[column.key]?.message,children:component}):component},cellClass:row=>{switch(row.__errors?.[column.key]?.level){case"error":return"rdg-cell-error";case"warning":return"rdg-cell-warning";case"info":return"rdg-cell-info";default:return""}}})))];try{generateColumns.displayName="generateColumns",generateColumns.__docgenInfo={description:"",displayName:"generateColumns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/ValidationStep/components/columns.tsx#generateColumns"]={docgenInfo:generateColumns.__docgenInfo,name:"generateColumns",path:"src/steps/ValidationStep/components/columns.tsx#generateColumns"})}catch(__react_docgen_typescript_loader_error){}var Table=__webpack_require__("./src/components/Table.tsx"),chunk_FQDHE43W=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-FQDHE43W.mjs"),chunk_JQMJHPZH=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-JQMJHPZH.mjs"),chunk_5FG5SY5K=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-5FG5SY5K.mjs"),chunk_RAWN7VJ3=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-RAWN7VJ3.mjs");const SubmitDataAlert=({isOpen,onClose,onConfirm})=>{const{allowInvalidSubmit,translations}=(0,useRsi.j)(),cancelRef=(0,react.useRef)(null);return(0,jsx_runtime.jsx)(chunk_FQDHE43W.a,{isOpen,onClose,leastDestructiveRef:cancelRef,isCentered:!0,id:"rsi",children:(0,jsx_runtime.jsx)(chunk_JQMJHPZH.Z,{children:(0,jsx_runtime.jsxs)(chunk_FQDHE43W._,{children:[(0,jsx_runtime.jsx)(chunk_5FG5SY5K.x,{fontSize:"lg",fontWeight:"bold",children:translations.alerts.submitIncomplete.headerTitle}),(0,jsx_runtime.jsx)(chunk_OFOVX77R.f,{children:allowInvalidSubmit?translations.alerts.submitIncomplete.bodyText:translations.alerts.submitIncomplete.bodyTextSubmitForbidden}),(0,jsx_runtime.jsxs)(chunk_RAWN7VJ3.m,{children:[(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{ref:cancelRef,onClick:onClose,variant:"secondary",children:translations.alerts.submitIncomplete.cancelButtonTitle}),allowInvalidSubmit&&(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{onClick:onConfirm,ml:3,children:translations.alerts.submitIncomplete.finishButtonTitle})]})]})})})};SubmitDataAlert.displayName="SubmitDataAlert";try{SubmitDataAlert.displayName="SubmitDataAlert",SubmitDataAlert.__docgenInfo={description:"",displayName:"SubmitDataAlert",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Alerts/SubmitDataAlert.tsx#SubmitDataAlert"]={docgenInfo:SubmitDataAlert.__docgenInfo,name:"SubmitDataAlert",path:"src/components/Alerts/SubmitDataAlert.tsx#SubmitDataAlert"})}catch(__react_docgen_typescript_loader_error){}const ValidationStep=({initialData,file,onBack})=>{const{translations,fields,onClose,onSubmit,rowHook,tableHook}=(0,useRsi.j)(),styles=(0,chunk_DMO4EI7P.mq)("ValidationStep"),toast=(0,chunk_5LTIYV3A.p)(),[data,setData]=(0,react.useState)(initialData),[selectedRows,setSelectedRows]=(0,react.useState)(new Set),[filterByErrors,setFilterByErrors]=(0,react.useState)(!1),[showSubmitAlert,setShowSubmitAlert]=(0,react.useState)(!1),[isSubmitting,setSubmitting]=(0,react.useState)(!1),updateData=(0,react.useCallback)((async(rows,indexes)=>{"AsyncFunction"!==rowHook?.constructor.name&&"AsyncFunction"!==tableHook?.constructor.name||setData(rows),(0,dataMutations.g)(rows,fields,rowHook,tableHook,indexes).then((data=>setData(data)))}),[rowHook,tableHook,fields]),updateRows=(0,react.useCallback)(((rows,changedData)=>{const changes=changedData?.indexes.reduce(((acc,index)=>(acc[data.findIndex((value=>value.__index===rows[index].__index))]=rows[index],acc)),{}),realIndexes=changes&&Object.keys(changes).map((index=>Number(index))),newData=Object.assign([],data,changes);updateData(newData,realIndexes)}),[data,updateData]),columns=(0,react.useMemo)((()=>generateColumns(fields)),[fields]),tableData=(0,react.useMemo)((()=>filterByErrors?data.filter((value=>!!value?.__errors&&Object.values(value.__errors)?.filter((err=>"error"===err.level)).length)):data),[data,filterByErrors]),rowKeyGetter=(0,react.useCallback)((row=>row.__index),[]),submitData=async()=>{const calculatedData=data.reduce(((acc,value)=>{const{__index,__errors,...values}=value;if(__errors)for(const key in __errors)if("error"===__errors[key].level)return acc.invalidData.push(values),acc;return acc.validData.push(values),acc}),{validData:[],invalidData:[],all:data});setShowSubmitAlert(!1),setSubmitting(!0);const response=onSubmit(calculatedData,file);response?.then?response.then((()=>{onClose()})).catch((err=>{toast({status:"error",variant:"left-accent",position:"bottom-left",title:`${translations.alerts.submitError.title}`,description:err?.message||`${translations.alerts.submitError.defaultMessage}`,isClosable:!0})})).finally((()=>{setSubmitting(!1)})):onClose()};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SubmitDataAlert,{isOpen:showSubmitAlert,onClose:()=>setShowSubmitAlert(!1),onConfirm:submitData}),(0,jsx_runtime.jsxs)(chunk_OFOVX77R.f,{pb:0,children:[(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:"2rem",flexWrap:"wrap",gap:"8px",children:[(0,jsx_runtime.jsx)(chunk_7OLJDQMT.X,{sx:styles.heading,children:translations.validationStep.title}),(0,jsx_runtime.jsxs)(chunk_PULVB27S.xu,{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap",children:[(0,jsx_runtime.jsx)(chunk_UVUR7MCU.z,{variant:"outline",size:"sm",onClick:()=>{if(selectedRows.size){const newData=data.filter((value=>!selectedRows.has(value.__index)));updateData(newData),setSelectedRows(new Set)}},children:translations.validationStep.discardButtonTitle}),(0,jsx_runtime.jsx)(chunk_VTV6N5LE.r,{display:"flex",alignItems:"center",isChecked:filterByErrors,onChange:()=>setFilterByErrors(!filterByErrors),children:translations.validationStep.filterSwitchTitle})]})]}),(0,jsx_runtime.jsx)(Table.i,{rowKeyGetter,rows:tableData,onRowsChange:updateRows,columns,selectedRows,onSelectedRowsChange:setSelectedRows,components:{noRowsFallback:(0,jsx_runtime.jsx)(chunk_PULVB27S.xu,{display:"flex",justifyContent:"center",gridColumn:"1/-1",mt:"32px",children:filterByErrors?translations.validationStep.noRowsMessageWhenFiltered:translations.validationStep.noRowsMessage})}})]}),(0,jsx_runtime.jsx)(ContinueButton.f,{isLoading:isSubmitting,onContinue:()=>{data.find((value=>!!value?.__errors&&!!Object.values(value.__errors)?.filter((err=>"error"===err.level)).length))?setShowSubmitAlert(!0):submitData()},onBack,title:translations.validationStep.nextButtonTitle,backTitle:translations.validationStep.backButtonTitle})]})};try{ValidationStep.displayName="ValidationStep",ValidationStep.__docgenInfo={description:"",displayName:"ValidationStep",props:{initialData:{defaultValue:null,description:"",name:"initialData",required:!0,type:{name:"(Data<T> & Meta)[]"}},file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/steps/ValidationStep/ValidationStep.tsx#ValidationStep"]={docgenInfo:ValidationStep.__docgenInfo,name:"ValidationStep",path:"src/steps/ValidationStep/ValidationStep.tsx#ValidationStep"})}catch(__react_docgen_typescript_loader_error){}},"./src/steps/ValidationStep/utils/dataMutations.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>addErrorsAndRunHooks});var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");let ErrorSources=function(ErrorSources){return ErrorSources.Table="table",ErrorSources.Row="row",ErrorSources}({});const addErrorsAndRunHooks=async(data,fields,rowHook,tableHook,changedRowIndexes)=>{const errors={},addError=(source,rowIndex,fieldKey,error)=>{errors[rowIndex]={...errors[rowIndex],[fieldKey]:{...error,source}}};if(tableHook&&(data=await tableHook(data,((...props)=>addError(ErrorSources.Table,...props)))),rowHook)if(changedRowIndexes)for(const index of changedRowIndexes)data[index]=await rowHook(data[index],((...props)=>addError(ErrorSources.Row,index,...props)),data);else data=await Promise.all(data.map((async(value,index)=>rowHook(value,((...props)=>addError(ErrorSources.Row,index,...props)),data))));return fields.forEach((field=>{field.validations?.forEach((validation=>{switch(validation.rule){case"unique":{const values=data.map((entry=>entry[field.key])),taken=new Set,duplicates=new Set;values.forEach((value=>{validation.allowEmpty&&!value||(taken.has(value)?duplicates.add(value):taken.add(value))})),values.forEach(((value,index)=>{duplicates.has(value)&&addError(ErrorSources.Table,index,field.key,{level:validation.level||"error",message:validation.errorMessage||"Field must be unique"})}));break}case"required":(changedRowIndexes?changedRowIndexes.map((index=>data[index])):data).forEach(((entry,index)=>{const realIndex=changedRowIndexes?changedRowIndexes[index]:index;null!==entry[field.key]&&void 0!==entry[field.key]&&""!==entry[field.key]||addError(ErrorSources.Row,realIndex,field.key,{level:validation.level||"error",message:validation.errorMessage||"Field is required"})}));break;case"regex":{const dataToValidate=changedRowIndexes?changedRowIndexes.map((index=>data[index])):data,regex=new RegExp(validation.value,validation.flags);dataToValidate.forEach(((entry,index)=>{const realIndex=changedRowIndexes?changedRowIndexes[index]:index;(entry[field.key]?.toString()??"").match(regex)||addError(ErrorSources.Row,realIndex,field.key,{level:validation.level||"error",message:validation.errorMessage||`Field did not match the regex /${validation.value}/${validation.flags} `})}));break}}}))})),data.map(((value,index)=>{"__index"in value||(value.__index=(0,v4.Z)());const newValue=value;if(changedRowIndexes&&!changedRowIndexes.includes(index)){if(!(value.__errors&&Object.values(value.__errors).some((error=>error.source===ErrorSources.Row))))return errors[index]?{...newValue,__errors:errors[index]}:newValue;const newErrors={...Object.entries(value.__errors).reduce(((acc,[key,value])=>(value.source===ErrorSources.Row&&(acc[key]=value),acc)),{}),...errors[index]};return{...newValue,__errors:newErrors}}return errors[index]?{...newValue,__errors:errors[index]}:!errors[index]&&value?.__errors?{...newValue,__errors:null}:newValue}))}},"./src/stories/mockRsiValues.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ye:()=>headerSelectionTableFields,dg:()=>editableTableInitialData,ly:()=>mockRsiValues});const mockRsiValues={...__webpack_require__("./src/ReactSpreadsheetImport.tsx").Rg,fields:[{label:"Name",key:"name",alternateMatches:["first name","first"],fieldType:{type:"input"},example:"Stephanie",validations:[{rule:"required",errorMessage:"Name is required"}]},{label:"Surname",key:"surname",alternateMatches:["second name","last name","last"],fieldType:{type:"input"},example:"McDonald",validations:[{rule:"unique",errorMessage:"Last name must be unique",level:"info"}],description:"Family / Last name"},{label:"Age",key:"age",alternateMatches:["years"],fieldType:{type:"input"},example:"23",validations:[{rule:"regex",value:"^\\d+$",errorMessage:"Age must be a number",level:"warning"}]},{label:"Team",key:"team",alternateMatches:["department"],fieldType:{type:"select",options:[{label:"Team One",value:"one"},{label:"Team Two",value:"two"}]},example:"Team one",validations:[{rule:"required",errorMessage:"Team is required"}]},{label:"Is manager",key:"is_manager",alternateMatches:["manages"],fieldType:{type:"checkbox",booleanMatches:{}},example:"true"}],onSubmit:data=>{console.log(data.all.map((value=>value)))},isOpen:!0,onClose:()=>{}},editableTableInitialData=[{name:"Hello",surname:"Hello",age:"123123",team:"one",is_manager:!0},{name:"Hello",surname:"Hello",age:"12312zsas3",team:"two",is_manager:!0},{name:"Whooaasdasdawdawdawdiouasdiuasdisdhasd",surname:"Hello",age:"123123",team:void 0,is_manager:!1},{name:"Goodbye",surname:"Goodbye",age:"111",team:"two",is_manager:!0}],headerSelectionTableFields=[["text","num","select","bool"],["second","123","one","true"],["third","123","one","true"],["fourth","123","one","true"]]}}]);